# DIL: ëª¨ë˜ ë¦¬ì•¡íŠ¸ ë”¥ ë‹¤ì´ë¸Œ, 1ì£¼ì°¨-6

> ìŠ¤í„°ë””: ì›”ê°„ CS, https://github.com/monthly-cs/2024-03-modern-react-deep-dive  
> ì˜¤ëŠ˜ ì§„í–‰: ê°œì¸ê³µë¶€

---

## DIL-week1-6_2024-03-09

| DIL ì£¼ì°¨ | ë²”ìœ„   | ë‚´ìš©                           | ì˜¤ëŠ˜ì°¨ ì§„ë„ |
| -------- | ------ | ------------------------------ | ----------- |
| 1ì£¼ì°¨    | 1, 2ì¥ | ë¦¬ì•¡íŠ¸ í•µì‹¬ìš”ì†Œì™€ ìë°”ìŠ¤í¬ë¦½íŠ¸ | 162p~       |

> `ì˜¤ëŠ˜ ì½ì€ ë‚´ìš©ì„ markdownìœ¼ë¡œ ê°„ë‹¨íˆ ë©”ëª¨`  
> ì½ì€ ì‹œê°„: 10ì‹œ~12ì‹œë°˜
> ì‹œê°„ì´ ì—†ë‹¤!
>
> 1. ë¹ ë¥´ê²Œ ì½ê¸°: ì¶”ê°€ ê²€ìƒ‰x, ì˜ˆì œ ë§Œë“¤ê¸°x => [í•˜ì§€ë§Œ ë§Œë“¤ì—ˆì£ ?](https://codesandbox.io/p/sandbox/mordern-react-deep-dive-t9vlwm?file=%2Fsrc%2Fcomponents%2FClassComponent.tsx%3A13%2C30)
> 2. ë°œí‘œ ë§¥ë½ ì •í•˜ê¸°
> 3. ì¥í‘œ ë§Œë“¤ë©´ì„œ ì¶”ê°€ ê³µë¶€
> 4. ê¶ê¸ˆí•œ ì ì€ ì •ë¦¬í•´ì„œ ì¼ìš”ì¼ 10ì‹œì— í† ì˜
>
> - ëŒ„ ì•„ë¸Œë¼ëª¨í”„ Dan Abramovì˜ ë¸”ë¡œê·¸ ì¸ìš©ì´ ë§ì´ ë‚˜ì˜¨ë‹¤
>   https://overreacted.io/

---

### í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ í•œê³„

- ë°ì´í„°ì˜ íë¦„ì„ ì¶”ì í•˜ê¸° ì–´ë µë‹¤: stateì˜ ì—…ë°ì´íŠ¸ ìœ„ì¹˜ ì–´ë””? ìƒëª… ì£¼ê¸° ë©”ì†Œë“œ ì½”ë“œì˜ íë¦„ íŒŒì•…í•´ì•¼í•¨
- ì¬ì‚¬ìš©ì´ ì–´ë µë‹¤: HOCë¡œ ê°ì‹¸ê±°ë‚˜, propsë¥¼ ì „ë‹¬í•´ì„œ ì¬ì‚¬ìš© ì‹œ, wrapper hellì— ë¹ ì§ˆ ìˆ˜ ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ ìƒì†ìœ¼ë¡œ ì¬ì‚¬ìš© ì‹œ, í´ë˜ìŠ¤ì˜ íë¦„ì„ ì«“ì•„ì•¼ í•¨
- ì»´í¬ë„ŒíŠ¸ê°€ ì»¤ì§„ë‹¤: ë¡œì§, ë‚´ë¶€ ë°ì´í„° íë¦„ì´ ë³µì¡í•˜ë©´ ìƒëª…ì£¼ê¸° ë©”ì„œë“œë¥¼ ë§ì´ ì¨ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ëš±ëš±í•´ì§
- ìƒëŒ€ì ìœ¼ë¡œ ì–´ë µë‹¤: JS ê°œë°œìë“¤ì´ class ë¬¸ë²•ì— ìµìˆ™í•˜ì§€ ì•Šê³ , í˜¼ëˆì˜ JS this
- ì½”ë“œ í¬ê¸° ìµœì í™” ì–´ë ¤ì›€: ë²ˆë“¤ í¬ê¸°ë¥¼ ì¤„ì´ê¸° ì–´ë µë‹¤. ë©”ì„œë“œëª…ì´ minifiedë˜ì§€ ì•Šê³ , ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œê°€ íŠ¸ë¦¬ì‰ì´í‚¹ ë˜ì§€ ì•ŠìŒ
- hot reloadingì— ë¶ˆë¦¬
  - class component: ìµœì´ˆ ëœë”ë§ ì‹œ instanceë¥¼ ìƒì„± => ë‚´ë¶€ì—ì„œ state ê°’ ê´€ë¦¬. instance ë‚´ë¶€ì— ìˆëŠ” render()ë¥¼ ìˆ˜ì •í•  ì‹œ, instanceë¥¼ ìƒˆë¡œ ë§Œë“¦ => stateì´ ì´ˆê¸°í™”ë¨
  - function component: state ê°’ì„ í´ë¡œì €ì— ì €ì¥, í•¨ìˆ˜ê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ë„ stateì„ ìƒì§€ ì•ŠìŒ

## í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸

- 16.8 ë²„ì „ ì´ì „ì—ëŠ” ë¬´ìƒíƒœ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨

### ìƒëª…ì£¼ê¸° ë©”ì„œë“œ

- componentDidMount, componentDidUpdate, componentUnmountë¥¼ useEffectë¥¼ ì‚¬ìš©í•´ ë¹„ìŠ·í•˜ê²Œ êµ¬í˜„
  - useEffectëŠ” ìƒëª…ì£¼ê¸°x => ê·¸ëƒ¥ ë™ê¸°ì ì¸ side effect ë§¤ì»¤ë‹ˆì¦˜

### í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì™€ ëœë”ë§ëœ ê°’

| êµ¬ë¶„               | ì°¨ì´ì                       | props        | ì„¤ëª…                                                                        |
| ------------------ | --------------------------- | ------------ | --------------------------------------------------------------------------- |
| class component    | ëœë”ë§ëœ ê°’ì„ ê³ ì •í•˜ì§€ ì•ŠìŒ | this.props   | ë”°ë¼ì„œ ìƒëª…ì£¼ê¸° ë©”ì„œë“œê°€ ë³€ê²½ëœ nextProps ê°’ì„ ì½ì„ ìˆ˜ ìˆë‹¤ (ë³€í™”í•˜ëŠ” this) |
| function component | ëœë”ë§ëœ ê°’ì„ ê³ ì •í•¨        | propsëŠ” ì¸ìˆ˜ | ëœë”ë§ì´ ì¼ì–´ë‚  ë•Œ, ê·¸ ìˆœê°„ì˜ props, stateì„ ê¸°ì¤€ìœ¼ë¡œ ëœë”ë§                |

- class componentì—ì„œ propsë¥¼ ê³ ì •í•˜ê³  ì‹¶ë‹¤ë©´?
  - ë¯¸ë¦¬ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ ì¸ìˆ˜ì— ì „ë‹¬í•´ë†“ëŠ”ë‹¤
  - render(){ ì—¬ê¸° } ë‚´ì— ê°’ì„ ë„£ëŠ”ë‹¤. ì´ìƒí•´

## ëœë”ë§ì€ ì–´ë–»ê²Œ ì¼ì–´ë‚˜ëŠ”ê°€?

- ë¦¬ì•¡íŠ¸ ëœë”ë§: ë¸Œë¼ìš°ì €ê°€ ëœë”ë§ì— í•„ìš”í•œ DOM íŠ¸ë¦¬ë¥¼ ë§Œë“œëŠ” ê³¼ì •
- ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ íŠ¸ë¦¬ ì•ˆì— ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì´ í˜„ì¬ ìì‹ ë“¤ì´ ê°€ì§€ê³  ìˆëŠ” propsì™€ stateì˜ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ì–´ë–»ê²Œ UIë¥¼ êµ¬ì„±í•˜ê³ , ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì–´ë–¤ DOM ê²°ê³¼ë¥¼ ë¸Œë¼ìš°ì €ì— ì œê³µí•  ê²ƒì¸ì§€ ê³„ì‚°í•˜ëŠ” ì¼ë ¨ì˜ ê³¼ì •

### ë¦¬ì•¡íŠ¸ì—ì„œ ëœë”ë§ì´ ë°œìƒí•˜ëŠ” ì´ìœ 

- ìµœì´ˆ ëœë”ë§
  - ì‚¬ìš©ìê°€ ì²˜ìŒ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì§„ì…
  - ë¸Œë¼ìš°ì €ì— ëœë”ë§í•  ê²°ê³¼ë¬¼(ì •ë³´)ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ìµœì´ˆ ëœë”ë§ ìˆ˜í–‰
- ë¦¬ëœë”ë§
  - í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸
    - setState ì‹¤í–‰
    - forceUpdate ì‹¤í–‰(shouldComponentUpdateë¥¼ ê±´ë„ˆëœ€, render ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ë©´? ë¬´í•œ ë£¨í”„)
  - í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
    - useStateì˜ setter ì‹¤í–‰
    - useReducerì˜ dispatch ì‹¤í–‰
    - key propsê°€ ë³€ê²½ë˜ëŠ” ê²½ìš°
    - ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ ë  ê²½ìš°
    - propsê°€ ë³€ê²½ë˜ëŠ” ê²½ìš°

> **key props?**
>
> - ë¦¬ëœë”ë§ì´ ë°œìƒí•˜ëŠ” ë™ì•ˆ, í˜•ì œ ìš”ì†Œë“¤ ì‚¬ì´ì—ì„œ ë™ì¼ ìš”ì†Œë¥¼ ì‹ë³„í•˜ëŠ” ê°’
> - keyê°€ ì—†ë‹¤ë©´? íŒŒì´ë²„ ë‚´ë¶€ì˜ sibling ì¸ë±ìŠ¤ë§Œ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨í•˜ê²Œ ë¨
> - keyë¥¼ ì‚¬ìš©í•´ ê°•ì œë¡œ ë¦¬ëœë”ë§ í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥

### ë¦¬ì•¡íŠ¸ì˜ ëœë”ë§ í”„ë¡œì„¸ìŠ¤

- ëœë”ë§ í”„ë¡œì„¸ìŠ¤ê°€ ì‹œì‘ë˜ë©´, ì»´í¬ë„ŒíŠ¸ ë£¨íŠ¸ì—ì„œë¶€í„° ì•„ë˜ìª½ìœ¼ë¡œ ë‚´ë ¤ê°€ë©° ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ëŠ”ë‹¤
  - ë°œê²¬ ì‹œ, í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¼ë©´ render()
  - ë°œê²¬ ì‹œ, í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë¼ë©´ FunctionComponent()ë¥¼ í˜¸ì¶œ í›„, ê²°ê³¼ ì €ì¥
    ```tsx
    // ê²°ê³¼
    {type: MyComponent, props: {count: 0, required: true, children: "ì•ˆë…•"}}
    ```
  - JSXë‹ˆê¹Œ createElement()ë¥¼ í˜¸ì¶œí•˜ëŠ” êµ¬ë¬¸ìœ¼ë¡œ ë³€í™˜ëœë‹¤
- Reconciliation ì¬ì¡°ì •: ì»´í¬ë„ŒíŠ¸ì˜ ëœë”ë§ ê²°ê³¼ë¬¼ì„ ìˆ˜ì§‘, ê°€ìƒ DOMê³¼ ë¹„êµí•´ì„œ ì‹¤ì œ DOMì— ë°˜ì˜í•˜ê¸° ìœ„í•œ ë³€ê²½ ì‚¬í•­ ìˆ˜ì§‘í•˜ëŠ” ê³¼ì •.
- ë³€ê²½ ì‚¬í•­ì„ ë™ê¸° ì‹œí€€ìŠ¤ë¡œ DOMì— ì ìš©

### Render Phaseì™€ Commit Phase

- ëœë” Render Phase
  - ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹¤í–‰: render(), return
  - ê²°ê³¼ì™€ ì´ì „ ê°€ìƒ DOMì„ ë¹„êµ
  - type, props, key ì¤‘ ë³€ê²½ì´ ìˆë‹¤ë©´ ë³€ê²½ì´ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸
- ì»¤ë°‹ Commit Phase
  - ëœë” ë‹¨ê³„ì˜ ë³€ê²½ ì‚¬í•­ì„ ì‹¤ì œ DOMì— ì ìš©
  - ì—…ë°ì´íŠ¸ ì‹œ, ë§Œë“  DOM ë…¸ë“œ ë° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¦¬ì•¡íŠ¸ ë‚´ë¶€ì˜ ì°¸ì¡°ë¥¼ ì—…ë°ì´íŠ¸
    - componentDidMount, componentDidUpdate ë©”ì„œë“œ, useLayoutEffect í›… í˜¸ì¶œ
  - ì»¤ë°‹ ì´í›„, ë¸Œë¼ìš°ì €ì˜ ëœë”ë§ì´ ë°œìƒí•œë‹¤
- ë¦¬ì•¡íŠ¸ì˜ ëœë”ë§ì´ ì¼ì–´ë‚˜ë„ ëœë” ë‹¨ê³„ì—ì„œ ë³€ê²½ì‚¬í•­ì„ ê°ì§€í•  ìˆ˜ ì—†ë‹¤ë©´? ì»¤ë°‹ ë‹¨ê³„ê°€ ìƒëµë˜ì–´ ë¸Œë¼ìš°ì € DOM ì—…ë°ì´íŠ¸ê°€ ì¼ì–´ë‚˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤

## ë©”ëª¨ì´ì œì´ì…˜

> ì»´í¬ë„ŒíŠ¸ì™€ í•¨ìˆ˜ì˜ ë¬´ê±°ìš´ ì—°ì‚°ì„ ê¸°ì–µ
> useMemo, useCallback, HOC memo

### ê°‘ë¡ ì„ë°• ğŸ¤œğŸ¤›

#### memoization ë°˜ëŒ€íŒŒ

- memoizationì€ ë¹„ìš©ì´ë‹¤.
  - ê°’ì„ ë¹„êµí•˜ê³  ëœë”ë§ í˜¹ì€ ì¬ê³„ì‚°ì´ í•„ìš”í•œì§€ í™•ì¸í•˜ëŠ” ì‘ì—…
  - ê²°ê³¼ë¬¼ì„ ì €ì¥í•´ ë‘ì—ˆë‹¤ê°€ ë‹¤ì‹œ êº¼ë‚´ì˜¤ëŠ” ì‘ì—…
- ì‹ ì¤‘í•˜ê²Œ í•´ì•¼í•œë‹¤.
  - premature optimization / premature memoization ì„ ê²½ê³„í•˜ì.
- ë¦¬ì•¡íŠ¸ê°€ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ PureComponentë¡œ ë§Œë“¤ê±°ë‚˜, memoë¡œ ê°ì‹¸ëŠ” ì‘ì—…ì„ í•˜ì§€ ì•Šì€ ì´ìœ : íŠ¸ë ˆì´íŠ¸ ì˜¤í”„ê°€ ìˆë‹¤. silver bulletì´ ì•„ë‹˜

#### memoization ì°¬ì„±íŒŒ

- memoizationì˜ ë¹„ìš©ì€? propsì— ëŒ€í•œ ì–•ì€ ë¹„êµ, ë¦¬ëœë”ë§ ë¦¬ì•¡íŠ¸ì˜ Reconciliation ì•Œê³ ë¦¬ì¦˜ê³¼ ê°™ë‹¤. ì–´ì°¨í”¼ ê²°ê³¼ë¬¼ì€ ì €ì¥ ì¤‘
- ì ì¬ì  ìœ„í—˜ ë¹„ìš©
  - ëœë”ë§ ë¹„ìš©
  - ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ë³µì¡í•œ ë¡œì§ ì¬ì‹¤í–‰
  - ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°˜ë³µì ìœ¼ë¡œ ì¼ì–´ë‚¨
  - ë¦¬ì•¡íŠ¸ê°€ êµ¬ íŠ¸ë¦¬ and ì‹ ê·œ íŠ¸ë¦¬ ë¹„êµ

```tsx
function useMath(number: number) {
  const [double, setDouble] = useState(0);
  const [triple, setTriple] = useState(0);

  useEffect(() => {
    setDouble(number * 2);
    setTriple(number * 3);
  });

  return useMemo(() => ({ double, triple }), [double, triple]);
}
```

- ë©”ëª¨ì´ì œì´ì…˜ ì˜ˆì œ: `./2024-03-09_sample.tsx`

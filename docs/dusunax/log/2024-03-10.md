# 회의메모: 모던 리액트 딥 다이브, 1주차

> 스터디: 월간 CS, https://github.com/monthly-cs/2024-03-modern-react-deep-dive  
> 발표 녹화본: https://www.youtube.com/@monthly-cs/videos

---

## LOG-week1_2024-03-10

| LOG 주차 | 범위   | 내용                           |
| -------- | ------ | ------------------------------ |
| 1주차    | 1, 2장 | 리액트 핵심요소와 자바스크립트 |

> 위치: 강남역, 코지모임공간  
> 시간: 3월 10일, 오전 10~12시  
> 발표: (1장)윤수현님, (2장)박민영님

---

## 회의메모

### 1. **객체 디스크럭처**

- (사례) 언제 쓰시나요?
  - request Payload 보낼 때 쓰는 경우
- 객체 복사는? `structuredClone`
  > structuredClone은 JavaScript에서 객체를 깊은 복사하는 기능을 제공하는 Web API입니다. 이 함수는 객체뿐만 아니라, 배열, 맵, 세트, 날짜, 타입드 배열, `ArrayBuffer`, `Blob` 등 다양한 내장 타입을 포함한 복잡한 데이터 구조를 복사할 수 있으며, 순환 참조가 있는 객체도 문제없이 복사할 수 있습니다. structuredClone을 사용하면, 원본 객체를 수정해도 복사된 객체에는 영향을 주지 않기 때문에 데이터의 불변성을 유지할 수 있습니다.
  - https://developer.mozilla.org/en-US/docs/Web/API/structuredClone
- (논의) 트랜스파일 및 번들 사이즈에 미치는 영향
  - 개발 생산성과 미니파이드될 번들 사이즈의 균형.
  - 객체 구조분해를 트랜스파일링할 때 번들이 커진다? -> minified될 것

### 2. **Array.prototype.reduce & generic type**

- (질문)`reduce` 메소드에 대한 타입 명세
  - A. 파라미터에 타입
  - B. 반환값 타입 단언
  - C. 제네릭 타입 사용(백광인님)

### **3. 클래스**

- 클래스 많이 쓰시나요?
  - (사례)외부 라이브러리와의 동기화 (`useSyncExternalStore`).
  - (사례)클래스를 context API에 저장하여 사용하는 사례.

### 4. **React 파이버 (Fiber)**

- (더 찾아보면 좋을 내용) 내부 동작 메커니즘은? 테스크 우선순위는?
  - 파이버 트리 구조와 우선 순위 조정 방법

### 5. **메모이제이션 (Memoization)**

- (토론) 메모이제이션에 어떻게 쓰고 있나요?
  - pros
    - 도메인에 따라 대용량의 메모이제이션이 필수인 경우
    - 뜨거운 감자: TS의 경우에도 있었음(you don’t know JS)
      - 완벽한 이해 없이 사용하더라도 이점이 확실
  - cons
    - 섣부른 메모이제이션 -> 휴먼 에러 발생
    - 리액트 성능 개선에 대한 이해 없이 사용하는 것을 지양
    - 상황에 맞는 메모이제이션의 비율을 컨트롤 할 수 있는 개발을 해야~

### 6. useEffect의 의존성 배열의 경우

- deps에 값 ignore하지 말자
  - useEffect 내의 값이 변하면, 당연히 값을 계산하여 리랜더링 해야함 (반성하자🥺)
  - (사례) 외부 값에 따른 강제 리랜더링
    - 좋은 패턴은 아님, 특정 케이스 공유
- 사이드 이펙트 최소로 줄이자
  - (사례)같은 값을 참조하는 사이드 이펙트가 의도치 않은 결과를 만든다. 유지보수에 어려움이 있음. (1)다른 사이드 이펙트에 영향을 받아 버그가 발생하기 쉽고, (2)다른 개발자가 작성한 사이드 이펙트 관련 코드를 수정하게 되었을 때 골치아픔
- 의존성 배열의 shallow comparison 문제

### 7. **Reflow와 Repaint**

- 애니메이션/트랜지션
  - CSS를 어떻게 작성하느냐에 따라서 같은 동작이어도 브라우저 렌더링에 차이가 있다.
  - 팀 컨벤션을 정하고, 의식해서 작성하자

### 7. **클래스 컴포넌트**

- (사례) 클래스 컴포넌트 써보신 분 \* 3
  - 이전 개발 경험 & 레거시 코드
  - `this` 바인딩
  - 로직의 강한 결합 문제
- (사례) ErrorBoundary의 경우 => 생명주기와 연관된 클래스 컴포넌트 사용
- (사례-채팅방 나가기) useEffect의 return에서 unmount 로직을 작성했을 때 타이밍으로 인한 버그
  - 페인트 이후 트리거되는 passive effect, unmount 타이밍 관리
  - beforeunload, 페이지 이탈 트리거

### 8. **함수 작성**

- 함수 분할 기준, 50줄 이내 / 길게 쓰지 말자
- 함수 이름 정하기 = 팀바팀
- (사례) 한글 변수 => 생각보다 쓰는 경우 있음!
  1. 영어로 표현하기 난해한 명사
  2. 이전에 여러가지 영어명으로 표현되었던 레거시 변수들 통일
  3. enum타입으로 백엔드에서 내려주기 (auto gen? 어떻게?)

### 9. **백엔드 vs 프론트, 연산 로직은 어디에서?**

- (사례) api call이 많을 때
  - 서버에서 하자
    - (백엔드 의견A) 프론트가 UI 출력을 제외한 로직을 많이 가지고 있을 필요가 없다
      - (사례) 프론트 로직 처리에 따라 순차적인 API call을 보내는 경우가 있었음 -> API call은 비용 -> 통일하여 내려주도록 변경
  - 프론트에서 하자
    - (백엔드 의견B) 백엔드에 추가하지 말고 프론트에서 알아서 처리하기
      - API call이 많은 경우 -> 서버에서 연산을 처리하는 것은 비용 -> 클라이언트에서 처리하도록 하자
- 연산이 필요할 때
  - 비용적 측면: 서버(회사) vs 클라이언트(사용자)
  - UX적인 측면: 서버에서 연산해서 내려주는 게 빠름 -> 고객 이탈률도 생각하자

### 10. **날짜 한글/영어**

- (사례) 영어to한글 요일 처리 방법
  - 서버와 클라이언트에서 가지고 있는 값은 영어로, UI단만 라이브러리로 한글 문자열 변환
- Day.js: 플러그인, 커스텀, 트리 쉐이킹에 장점

### 11. **상태 관리 라이브러리**

- (사례)
  - Zustand (2건)
  - Redux Toolkit
  - Jotai
  - Context API + Tanstack Query
  - Recoil + Tanstack Query
    - Recoil의 미래 => maintain이 안되고 있음: 탈출하자. Jotai 렛츠고

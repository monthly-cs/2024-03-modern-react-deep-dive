# 모던 리액트 딥다이브 week5
# 2024-04-03 DIL

|주차|DIL 범위|날짜|개인 진도|
|------|---|---|---|
| 5주차 |9장|2024-04-03|550-568p|


# 9장 모던 리액트 개발 도구로 개발 및 배포환경 구축하기

#### 깃허브 액션은 깃허브 저장소에서만 사용가능하다. (제한적 무료 서비스.)

![image](https://github.com/monthly-cs/2024-03-modern-react-deep-dive/assets/116958681/ba139460-67d3-4380-a4f4-40d583ab02d3)

## 깃허브 액션의 기본개념
> 스텝 > 잡(병렬실행) > 액션 > 러너(실행 서버)

- 러너: 파일로 작성된 깃허브 액션이 실행되는 서버를 의미함.
- 액션: 러너에서 실행되는 하나의 작업단위.
- 이벤트: 깃허브 액션의 실행을 일으키는 이벤트.
- 잡: 하나의 러너에서 실행되는 여러 스텝의 모음. (병렬O)
- 스텝: 잡 내부에서 일어나는 하나하나의 작업. (병렬X)

## 깃허브 액션 작성하기

- 저장소 루트: ./github/workflows 폴더 생성
- yaml 파일 작성을 위해 .yml, .yaml 확장자 사용.
- 저장소에 prettier가 설치되어 있다면 yaml 파일도 함께 포함시켜 코드 스타일 유지하는 것이 좋음.

## yaml 파일 내에서 액션은 어떻게 작성되었을까?/ 각 값의 뜻은?

- name: 액션의 이름.
- run-name: 액션이 실행될 때 구별할 수 있는 타이틀 명. (필수X)
- on: 언제 이 액션을 실행할 지를 정의. (필수O)
- jobs: 필수 값. 해당 액션에서 수행할 잡을 의미. (필수O) / 한 개 이상인 경우, 병렬로 실행.


### 액션 작성의 장점
- Next.js 프로젝트를 빌드하는 CI를 작성할 수 있다.
- 젠킨스를 처음부터 구축하여 사용하는 것 보다 손 쉽게 CI 구축이 가능하다. 
- 저장소에 yaml 파일 하나만 추가하여 CI 구축 가능.
- Github actions 를 적절히 활용하여 다양한 작업을 할 수 있다.

### 깃허브에서 제공하는 기본 엑션

- actions/ checkout: 깃허브 저장소를 체크아웃하는 액션./ 저장소를 기반으로 작업할 경우 반드시 필요.
- actions/ setup-node: Node.js 설치하는 액션.
- actions/ github-script: Github API가 제공하는 기능을 사용할 수 있도록 도와주는 액션.
- actions/ stale: 오래된 이슈, PR을 자동으로 닫거나 더 이상 커뮤니케이션 하지 못하도록 닫는다.
- actions/ dependency-review-action: 의존성 그래프에 대한 변경되었을 때 실행되는 액션.
- github/codeql-action: 깃허브의 코드 분석 솔루션인 code-ql을 활용해 저장소 내 코드의 취약점을 분석해준다.


### 저장소에 포함되어 있는 이미지 최적화 액션: calibreapp/image-actions 

### 해당 웹사이트에 라이브러리 취약점이 존재하는 지 확인하는 액션: lirantal/is-website-vulnerable 

### Lighthouse CI
- 구글에서 제공하는 액션
- 웹 성능 지표인 라이트 하우스를 CI 기반으로 실행할 수 있도록 도와주는 도구.
- 프로젝트의 URL을 방문하여 라이트 하우스 검사 실행 > 머지 예정인 웹사이트의 성능 지표를 측정할 수 있음.

## 깃허브 Dependabot으로 보안 취약점 해결하기

### package.json의 dependencies 이해하기

의존성 문제를 해결하기에 앞서 의존성과 버전에 대해 알아보자.

### package.json의 버전

#### 유의적 버전의 정의

- 기존 버전과 호환되지 않게 API가 바뀌면 "주 버전"을 올리고
- 기존 버전과 호환되면서 새로운 기능을 추가할 때는 "부 버전"을 올리고
- 기존 버전과 호환되면서 버그를 수정한 것이라면 "수 버전"을 올린다.

#### npm 버전 규칙 정의
- react@16.00: 버전 앞에 특수기호 없는 경우, 해당 버전에 대해서만 의존하고 있다.
- react@^16.00: 16.0.0과 호환되는 버전. / ex. 16.0.0부터 17.0.0 미만의 모든 버전
- react@~16.00: 패치 버전에 대해서만 호한되는 버전을 의미. / ex. 16.0.0부터 16.1.0 미만의 모든 버전

※ 유의적 버전은 개발자들간의 암묵적인 약속일 뿐, 해당 API의 버전이 유의적 버전에 맞춰 규현되어 있는지 알 수 없음을 유의. 
/colors.js 라이브러리 사건: 작동 불가능한 패키지를 배포함. 모든 프로젝트에 에러 발생..

### package.json의 의존성
- package.json에서 dependencies란: 프로젝트를 운영하는 데 필요한 자신 외의 npm 라이브러리를 정의해 둔 목록.
- JSON 형식으로 작성되어 있음.  
- 주로 dependency와 dependencies로 구성되어 있음.


- dependencies: 프로젝트를 실행하는데 꼭 필요한 패키지. npm install
- devDependencies: 개발 단계에서 필요한 패키지들을 선언. npm install --save-dev
- peerDependencies: 서비스 보다 라이브러리와 패키지에서 자주 쓰이는 단위./ 직접적으로 require, import 하진 않지만 호환성으로 인해 필요한 경우.

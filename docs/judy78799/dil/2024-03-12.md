# 모던 리액트 딥다이브 week2
# 2024-03-12 DIL

|주차|DIL 범위|날짜|개인 진도|
|------|---|---|---|
| 2주차 |3장, 5장|2024-03-12|189-203p|


# 03장 리액트 훅 깊게 살펴보기

## 리액트의 모든 훅 파헤치기
### 훅의 장점
- 리액트의 핵심적인 기능을 함수에서도 가능하게 만든다.
- 클래스 컴포넌트 보다 간결하게 작성할 수 있다.

### useState 
함수 컴포넌트 내부에서 상태를 정의하고, 이 상태를 관리할 수 있게 해주는 훅.

useStae 훅의 결과값은 어떻게 함수가 실행되도 그 값을 유지하고 있을까?
-> 클로저를 이용. 실제 리액트 코드에서는 useReducer를 이용.

어떤 함수(state) 내부에 선언된 함수가 함수의 실행이 종료된 이후에도 지역변수인 <br>
state를 계속 참조할 수 있다는 것을 의미한다.

#### 클로저(앞의 1장에서 언급)
> 함수의 실행이 끝났음에도 함수가 선언된 환경을 기억할 수 있는 방법.


#### 게으른 초기화
- useState의 인수로 변수 대신 함수를 넘기는 것.
- state가 처음 만들어질 때만 사용됨. 이후 리렌더링의 경우 함수 실행 무시.
- 초깃값이 복접하거나 무거운 연산을 포함하고 있을 때 사용해야 함.
- ex. localStorage, sessionStorage, map, filter, find 등.

### useEffect
- 애플리케이션 내 컴포넌트의 여러 값들을 활용해 동기적으로 부수 효과를 만드는 매커니즘.
- 첫번째 인수 실행할 부수효과가 포함된 함수
- 두번째 인수 의존성 배열을 전달.
- 의존성 배열이 변경될 때 마다 콜백을 실행. -> 어떻게 변경되는 것을 인지할까?

함수 컴포넌트는 매번 함수를 실행해 렌더링을 수행한다.  
렌더링 시 마다 고유의 state와 props 값을 가지고 있다. 
useEffect는 렌더링할 때마다 의존성에 있는 값을 보면서 의존성의 값이 이전과 다른 게 하나라도 있으면 
부수 효과를 실행하는 평범한 함수라고 볼 수 있다.

#### useEffect의 클린 업 함수
이벤트를 등록하고 지울 때 사용.
이전 state를 참조해 실행된다.
함수가 정의됐을 당시에 선언됐던 이전 값을 보고 실행. 값 새로고침 X.

#### 클린 업 함수에서 지워야 하는 이유
이전의 클린 업 함수가 존재한다면 그 클린 업 함수를 실행한 뒤에 콜백을 실행.
-> 이벤트를 추가하기 전에 이전에 등록했던 이벤트 핸들러를 삭제하는 코드를 클린업 함수에 추가.

#### useEffect 구현
핵심: 의존성 배열의 이전 값 & 얕은 비교.
이전 의존성 배열과 현재 의존성 배열의 값에 하나라도 변경사항이 있다면 callback으로 선언한 부수효과를 실행.


# 모던 리액트 딥다이브 week3
# Presentation 발표자료

|주차|DIL 범위|날짜|개인 진도|
|------|---|---|---|
| 3주차 |6장, 7장|2024-03-24|401-431p|

# 6장 리액트 개발 도구로 디버깅하기

## 리액트 개발도구란? 
react-dev-tools : 크롬브라우저에서 확장도구로 설치하여 애플리케이션을 디버깅한다.

### 컴포넌트 탭
- 애플리케이션의 컴포넌트 트리를 확인할 수 있다. + props, hook 등.

### 함수 선언식/ 표현식으로 선언되지 않은 컴포넌트의 특징 (리액트 16.8 버전)

- 익명함수를 default로 export한 컴포넌트 -> _default로 표시.
- memo를 사용해 익명함수로 만든 컴포넌트를 감싼 경우 -> Anonymous(함수명 명확히 추론 X).
- 고차 컴포넌트로 감싼 경우 -> Anonymous.

문제: 리액트 16.9버전 이후 일부 익명함수의 컴포넌트 명칭 추론이 가능하였지만
개발도구에서 컴포넌트를 특정하기는 아직 어려움 발생.

해결법: 
(i) 컴포넌트/함수를 기명함수로 변경.
(ii) 기명함수로 바꾸기 어려운 경우: 함수에 displayName 속성 추가. -> 리액트 개발자 도구에서 컴포넌트 명 확인가능.

### displayName
- 익명함수로 선언하기 곤란한 경우.
- 함수명과는 별도로 특별한 명칭을 부여해 명시적으로 확인이 필요한 경우
- 고차 컴포넌트의 경우: 고차컴포넌트 + 일반 컴포넌트의 조합 -> 디버깅하는데 도움 多.
- but, 리액트 빌드 트리의 경우 확인 어려움. (feat. terser 압축도구)

### 컴포넌트 도구의 기능

- 눈 아이콘: 어디에서 렌더링 되었는지 확인.
- 벌레 아이콘: 클릭 후 콘솔 탭 확인 -> props, hooks, nodes가 기록됨.
- 소스 코드 아이콘: 해당 컴포넌트의 소스코드 확인가능. / {}: 난독화된 콛드를 읽고 디버깅 할 때 유용.

### 컴포넌트 props, hooks의 구체적 설명

- props: 값 + 함수 기록되어있음.
  > Copy to clipboard: 클립보드로 복사.
    > Store as global variable: window.$r에 해당 정보가 담김. (콘솔로 이동 시 보임.)
      > Go to definition: 값이 함수인 props 클릭 시 나타남. -> 해당함수가 선언된 코드로 이동 or 수정 가능.

- hooks: 컴포넌트에서 사용 중인 훅 정보 확인가능. 보통 use~가 생략되어 나타남.
  >훅에 넘겨주는 함수를 기명함수로 넘겨주면 함수의 이름 확인가능 (useEffect가 여러 개 선언되어있는 경우 유용.)


### 컴포넌트 렌더링 주체 확인 방법 -> rendered by 사용

- 프로덕션 모드: react-dom 버전확인만
- 개발 모드: 부모 컴포넌트 까지 확인 가능.

## 프로파일러란?

:리액트가 렌더링하는 과정에서 발생하는 상황을 확인하기 위한 도구. (프로덕션 빌드 애플리케이션 사용 불가.)

- 어떤 컴포넌트 렌더링?
- 몇 차례 렌더링?
- 어떤 작업에서 오래 걸렸는지 확인이 가능하다.


### 프로파일링 메뉴

#### Flamegraph: 렌더 커밋별로 어떠한 작업이 일어났는지 나타냄.

- 너비가 넓을 수록 렌더링이 오래걸림.
- 렌더링된/되지 않은 컴포넌트 정보 확인 가능.
- 렌더링이 발생한 횟수 확인 가능.

#### Ranked: 발생한 컴포넌트만 보여줌.

#### 타임라인: 시간의 흐름에 따라 리액트가 작동하는 내용을 추적하는데 유용함.

#### 프로파일러로 렌더링 원인 파악해서 수정

**새로 고침 프로파일링
- 우측 상단 그래프의 화살표를 눌러 원하는 커밋을 누른다.
- what caused update의 내용을 클릭하여 내용 확인.

**사용자 인터렉션 프로파일링
- 직접 테스트 해보며 확인

=> 불필요한 코드를 줄일 수 있다. -> 성능 최적화 가능.
=> state 변경을 최소 컴포넌트 단위로 분리해야 좋다는 것을 알 수 있음.


### 리액트 개발 도구의 장점

- 정적으로 생성된 컴포넌트 트리 확인.
- 프로파일링을 통해 리액트 애플리케이션의 시간의 흐름에 따라 어떻게 작동되는지 +  불필요한 렌더링 검토 가능.
